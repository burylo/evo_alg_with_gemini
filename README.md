Код та `README` повністю згенеровані за допомогою `Gemini 2.5 Pro Experimantal 03-25`

# Розширена Еволюційна Симуляція (Pygame)

Це 2D симуляція, що демонструє принципи еволюції та взаємодії між популяціями за допомогою бібліотеки Pygame. Вона включає два типи агентів: "Істоти" (умовні травоїдні) та "Хижаки", які взаємодіють між собою та з навколишнім середовищем (їжа, перешкоди). Агенти еволюціонують, змінюючи свої гени (швидкість, чутливість) через покоління.

## Особливості

*   Візуалізація на основі Pygame.
*   **Два Типи Агентів:**
    *   **Істоти:** Шукають їжу, розмножуються статевим шляхом, намагаються уникати хижаків та скупчення.
    *   **Хижаки:** Полюють на Істот, розмножуються (в поточній версії - асексуально, але з кулдауном), уникають скупчення.
*   **Навколишнє Середовище:**
    *   **Їжа:** Періодично з'являється, споживається Істотами для отримання енергії.
    *   **Перешкоди:** Статичні прямокутники, смертельні при контакті.
*   **Еволюційні Механізми:**
    *   **Гени:** Кожен агент має гени швидкості та чутливості.
    *   **Статеве Розмноження (Істоти):** Істоти шукають партнера, гени нащадка утворюються шляхом **схрещування (crossover)** генів батьків.
    *   **Асексуальне Розмноження (Хижаки):** Нащадок є копією батька (з мутаціями).
    *   **Мутації:** При розмноженні гени можуть випадково змінюватися.
    *   **Відбір:** Агенти з більш пристосованими генами мають більше шансів вижити, знайти їжу/здобич/партнера та передати гени.
*   **Життєвий Цикл:**
    *   **Енергія:** Агенти втрачають енергію з часом та від руху, отримують від їжі/полювання.
    *   **Старіння:** Агенти мають обмежений максимальний вік.
    *   **Смерть:** Можлива від голоду, старості, зіткнення з перешкодами або полювання.
*   **Поведінка:**
    *   **Ухилення від Хижаків (Істоти):** Пріоритетний рух у напрямку, протилежному від виявленого хижака.
    *   **Уникнення Скупчення (Separation):** Проста реалізація відштовхування від надто близьких сусідів свого виду.
*   **Відстеження Поколінь:** Симуляція рахує максимальне покоління для обох типів агентів.
*   **Збереження та Завантаження:** Можливість зберегти поточний стан симуляції у файл (`.pkl`) та завантажити його пізніше.
*   **Візуалізація Даних:** Після завершення симуляції будуються графіки динаміки популяцій та середніх значень генів за допомогою `matplotlib`.
*   **Інтерактивність:**
    *   Пауза симуляції (Пробіл).
    *   Додавання їжі (F), Істот (C), Хижаків (P).
    *   Вибір агента кліком миші для перегляду детальних характеристик (енергія, гени, вік, покоління, статус розмноження).
    *   Збереження стану (S), Завантаження стану (L).

## Приклад
<img src="src/example.gif" width="700" height="525">

## Вимоги

*   Python 3.x
*   Pygame
*   NumPy
*   Matplotlib (для графіків після завершення)

## Встановлення Залежностей

Ви можете встановити необхідні бібліотеки за допомогою pip:

```bash
pip install pygame numpy matplotlib
```

## Запуск Симуляції

1. Збережіть Python код симуляції у файл (наприклад, evolution_sim.py).
2. Запустіть скрипт з вашого терміналу:
```bash
python advanced_evolution_sim.py
```

## Управління

* `SPACE`: Поставити симуляцію на паузу / Зняти з паузи.
* `F`: Додати більше одиниць їжі.
* `C`: Додати більше Істот (до максимального ліміту).
* `P`: Додати більше Хижаків (до максимального ліміту).
* `S`: Зберегти поточний стан симуляції у файл evolution_sim_save.pkl.
* `L`: Завантажити стан симуляції з файлу evolution_sim_save.pkl.
* Ліва Кнопка Миші: Клікніть на Істоту або Хижака, щоб вибрати його. Характеристики обраного агента будуть показані у верхньому правому куті. Клікніть на порожнє місце, щоб зняти вибір.
* Кнопка Закриття Вікна: Завершити симуляцію та показати графіки статистики (якщо зібрано достатньо даних).

## Продемонстровані Еволюційні Концепції

* Варіація: Випадкові початкові гени та мутації під час розмноження створюють різноманітність у популяціях.
* Спадковість: Нащадки успадковують гени (з невеликими змінами) від своїх батьків.
* Відбір: Агенти, чиї гени (швидкість, чутливість) краще підходять для виживання в поточному середовищі (ефективний пошук їжі/здобичі, уникнення смерті), мають більше шансів вижити та передати свої гени наступному поколінню.
* Адаптація (Емерджентна): З часом середні характеристики популяцій можуть змінюватися у відповідь на тиск середовища (наявність їжі, хижаків, перешкод).
* Коеволюція: Присутність хижаків впливає на еволюцію істот (напр., може сприяти розвитку вищої швидкості для втечі), а стан популяції істот впливає на еволюцію хижаків.
* Емерджентна Поведінка: Комплексна динаміка популяцій та поведінка (ухилення, уникнення скупчення) виникає з простих правил взаємодії агентів.

## Можливі Покращення
* Повноцінна реалізація статевого розмноження для хижаків.
* Реалізація інших правил групової поведінки (Alignment, Cohesion).
* Оптимізація продуктивності за допомогою просторових структур даних (Quadtree, Grid) для пришвидшення пошуку сусідів/цілей.
* Додавання різних типів їжі або ресурсів.
* Більш складна генетика (більше генів, домінантність/рецесивність).
* Графічне відображення статистики в реальному часі.